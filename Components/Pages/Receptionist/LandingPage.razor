@page "/receptionist/landing-page"
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@using System
@using System.Threading.Tasks
@inject ProtectedSessionStorage SessionStorage
@inject ProtectedLocalStorage LocalStorage
@inject NavigationManager NavigationManager
@layout BlazorApp1.Components.Layout.MainLayout
@rendermode InteractiveServer
@inject IJSRuntime JSRuntime

<div class="landing-container @(isWelcomeVisible ? "" : "welcome-hidden") @(isDarkMode ? "dark-mode" : "")">
    <!-- Dark Mode Toggle -->
    <button class="dark-mode-toggle" @onclick="ToggleDarkMode">
        @if (isDarkMode)
        {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2"/>
            </svg>
        }
        else
        {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2"/>
            </svg>
        }
    </button>
    
    <div class="welcome-screen">
        <div class="welcome-content">
            <div class="welcome-logo">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#1E88E5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 17L12 22L22 17" stroke="#1E88E5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 12L12 17L22 12" stroke="#1E88E5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>            <h1 class="welcome-title">Welcome to <span class="highlight">MedConnect</span></h1>
            <p class="welcome-subtitle">Your healthcare management platform</p>
            <div class="pulse-animation"></div>            <button class="welcome-button" @onclick="ShowLoginCard" @onclick:preventDefault="true">
                Get Started
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12H19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 5L19 12L12 19" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        
        <!-- Animated Particles -->
        <div class="particles">
            @for(int i = 1; i <= 15; i++) {
                <div class="particle particle-@i"></div>
            }
        </div>
    </div>

    <div class="login-container @(isCardVisible ? "card-visible" : "")">
        <div class="light-side">
            <div class="card-container">
                <!-- Sign In Card -->
                <div class="auth-card sign-in-card @(isSigningUp ? "slide-out" : "slide-in")">
                    <div class="card-header">
                        <h2>Sign in to MedConnect</h2>
                        <p>Enter your credentials:</p>
                    </div>
                    
                    <div class="role-selector">
                        <div class="role-option @(isAdminView ? "selected" : "")" @onclick="() => SwitchRole(true)">
                            <div class="role-icon admin-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 7H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 4V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <span>Hospital Staff</span>
                        </div>
                        <div class="role-option @(!isAdminView ? "selected" : "")" @onclick="() => SwitchRole(false)">
                            <div class="role-icon patient-icon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16 4H18C18.5304 4 19.0391 4.21071 19.4142 4.58579C19.7893 4.96086 20 5.46957 20 6V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H6C5.46957 22 4.96086 21.7893 4.58579 21.4142C4.21071 21.0391 4 20.5304 4 20V6C4 5.46957 4.21071 4.96086 4.58579 4.58579C4.96086 4.21071 5.46957 4 6 4H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 11H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 16H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 11H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 16H8.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 2V8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 5H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <span>Patient</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 6L12 13L2 6" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input type="email" @bind="email" placeholder="Email Address" />
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 11H5C3.89543 11 3 11.8954 3 13V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V13C21 11.8954 20.1046 11 19 11Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input type="@(showPassword ? "text" : "password")" @bind="password" placeholder="Password" />
                            <button type="button" class="toggle-password" @onclick="TogglePasswordVisibility">
                                @if (showPassword)
                                {
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.9 4.24C10.5883 4.07888 11.2931 3.99834 12 4C19 4 23 12 23 12C22.393 13.1356 21.6691 14.2047 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1752 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.572 9.14351 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2219 9.18488 10.8539C9.34884 10.4859 9.58524 10.1547 9.88 9.88M1 1L23 23M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06L17.94 17.94Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                }
                                else
                                {
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                }
                            </button>
                        </div>
                    </div>
                    
                    <div class="remember-forgot">
                        <label class="remember-me">
                            <input type="checkbox" @bind="rememberMe" />
                            <span>Remember me</span>
                        </label>
                        <a href="javascript:void(0)" class="forgot-password">Forgot password?</a>
                    </div>
                    
                    <button type="button" class="submit-button" @onclick="HandleLoginMethod">
                        SIGN IN
                        <div class="arrow-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 5L19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </button>
                    
                    <div class="divider">OR</div>
                    
                    <button type="button" class="social-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 0 1-5.279-5.28 5.27 5.27 0 0 1 5.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 0 0-8.934 8.934 8.907 8.907 0 0 0 8.934 8.934c4.467 0 8.529-3.249 8.529-8.934 0-.528-.081-1.097-.202-1.625z" fill="#4285F4"/>
                            <path d="M4.136 14.833l-3.122 2.35a8.962 8.962 0 0 0 7.748 4.446c2.125 0 3.921-.691 5.254-1.874l-2.6-2.043c-.731.51-1.667.812-2.654.812-2.028 0-3.758-1.353-4.382-3.183l-.244-.588z" fill="#34A853"/>
                            <path d="M12.004 4.046c2.277 0 4.308.852 5.892 2.234l2.598-2.599A8.932 8.932 0 0 0 12.004 0a8.962 8.962 0 0 0-7.747 4.446l3.12 2.35.245-.587a5.276 5.276 0 0 1 4.382-3.183z" fill="#EA4335"/>
                            <path d="M12.004 22.956a8.935 8.935 0 0 0 6.378-2.573l-2.993-2.389a5.605 5.605 0 0 1-3.385 1.147 5.29 5.29 0 0 1-4.974-3.694l-.273-.638-3.065 2.419c1.323 3.294 4.508 5.728 8.312 5.728z" fill="#FBBC05"/>
                        </svg>
                        <span>Continue with Google</span>
                    </button>
                    
                    <button @onclick="ToggleMode" class="toggle-button">
                        SIGN UP
                    </button>
                </div>
                
                <!-- Sign Up Card -->
                <div class="auth-card sign-up-card @(isSigningUp ? "slide-in" : "slide-out")">
                    <div class="card-header">
                        <h2>Create Account</h2>
                        <p>Please provide your details:</p>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input type="text" @bind="fullName" placeholder="Full Name" />
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 6L12 13L2 6" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input type="email" @bind="signupEmail" placeholder="Email Address" />
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="input-wrapper">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 11H5C3.89543 11 3 11.8954 3 13V20C3 21.1046 3.89543 22 5 22H19C20.1046 22 21 21.1046 21 20V13C21 11.8954 20.1046 11 19 11Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M7 11V7C7 5.67392 7.52678 4.40215 8.46447 3.46447C9.40215 2.52678 10.6739 2 12 2C13.3261 2 14.5979 2.52678 15.5355 3.46447C16.4732 4.40215 17 5.67392 17 7V11" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input type="@(showSignupPassword ? "text" : "password")" @bind="signupPassword" placeholder="Password (min 6 chars)" />
                            <button type="button" class="toggle-password" @onclick="ToggleSignupPasswordVisibility">
                                @if (showSignupPassword)
                                {
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.9 4.24C10.5883 4.07888 11.2931 3.99834 12 4C19 4 23 12 23 12C22.393 13.1356 21.6691 14.2047 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1752 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.572 9.14351 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 9.02091 11.2219 9.18488 10.8539C9.34884 10.4859 9.58524 10.1547 9.88 9.88M1 1L23 23M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06L17.94 17.94Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                }
                                else
                                {
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="#919191" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                }
                            </button>
                        </div>
                    </div>
                    
                    <div class="account-type">
                        <p>I want to register as a:</p>
                        <div class="radio-options">
                            <label class="radio-option">
                                <input type="radio" name="accountType" value="patient" checked="@(!isSignupAdmin)" @onchange="() => isSignupAdmin = false" />
                                <span>Patient</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="accountType" value="admin" checked="@(isSignupAdmin)" @onchange="() => isSignupAdmin = true" />
                                <span>Healthcare Provider</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="terms-check">
                        <label>
                            <input type="checkbox" @bind="acceptTerms" />
                            <span>I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></span>
                        </label>
                    </div>
                    
                    <button type="button" class="submit-button" @onclick="HandleSignup">
                        SIGN UP
                        <div class="arrow-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 5L19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </button>
                    
                    <button @onclick="ToggleMode" class="toggle-button">
                        SIGN IN
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Reset and base styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}


/* Reset html and body to ensure full coverage */
::deep html, ::deep body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
}

/* Main container styles */
.landing-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%);
    transition: all 0.3s ease;
}

.landing-container.dark-mode {
    background: linear-gradient(135deg, #1a2035 0%, #0f172a 100%);
    color: #e2e8f0;
}

/* Dark mode toggle */
.dark-mode-toggle {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 20;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.dark-mode .dark-mode-toggle {
    background: rgba(0, 0, 0, 0.2);
    color: white;
}

.dark-mode-toggle:hover {
    transform: scale(1.1);
}

.dark-mode-toggle svg {
    stroke: #1E88E5;
    transition: all 0.3s ease;
}

.dark-mode .dark-mode-toggle svg {
    stroke: #4CC2FF;
}

/* Welcome screen styles */
.welcome-screen {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.6s ease-in-out;
    z-index: 10;
}

.welcome-hidden .welcome-screen {
    transform: translateY(-100%);
}

.welcome-content {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    z-index: 15;
}

.welcome-logo {
    margin-bottom: 1.5rem;
}

.welcome-title {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #333;
    font-weight: 700;
    transition: color 0.3s ease;
}

.dark-mode .welcome-title {
    color: #fff;
}

.highlight {
    color: #1E88E5;
}

.dark-mode .highlight {
    color: #4CC2FF;
}

.welcome-subtitle {
    font-size: 1.2rem;
    color: #666;
    margin-bottom: 2rem;
    transition: color 0.3s ease;
}

.dark-mode .welcome-subtitle {
    color: #aaa;
}

.pulse-animation {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: rgba(30, 136, 229, 0.2);
    position: absolute;
    z-index: -1;
    animation: pulse 2s infinite;
}

@@keyframes pulse {
    0% {
        transform: scale(0.8);
        opacity: 0.7;
    }
    70% {
        transform: scale(1.5);
        opacity: 0;
    }
    100% {
        transform: scale(0.8);
        opacity: 0;
    }
}

.welcome-button {
    background-color: #1E88E5;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
}

.welcome-button:hover {
    background-color: #1976D2;
    transform: translateY(-2px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
}

/* Particles Animation */
.particles {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    overflow: hidden;
    z-index: 5;
    pointer-events: none;
}

.particle {
    position: absolute;
    border-radius: 50%;
    background: rgba(30, 136, 229, 0.2);
    box-shadow: 0 0 10px rgba(30, 136, 229, 0.5);
    animation: float 15s infinite ease-in-out;
}

@@keyframes float {
    0%, 100% {
        transform: translateY(0) translateX(0);
    }
    25% {
        transform: translateY(-50px) translateX(30px);
    }
    50% {
        transform: translateY(-100px) translateX(-30px);
    }
    75% {
        transform: translateY(-50px) translateX(50px);
    }
}

.particle-1 { width: 10px; height: 10px; top: 10%; left: 15%; animation-delay: 0s; }
.particle-2 { width: 15px; height: 15px; top: 20%; left: 80%; animation-delay: 1s; }
.particle-3 { width: 8px; height: 8px; top: 40%; left: 10%; animation-delay: 2s; }
.particle-4 { width: 12px; height: 12px; top: 60%; left: 70%; animation-delay: 3s; }
.particle-5 { width: 18px; height: 18px; top: 80%; left: 30%; animation-delay: 4s; }
.particle-6 { width: 7px; height: 7px; top: 30%; left: 60%; animation-delay: 5s; }
.particle-7 { width: 14px; height: 14px; top: 70%; left: 20%; animation-delay: 6s; }
.particle-8 { width: 10px; height: 10px; top: 20%; left: 30%; animation-delay: 7s; }
.particle-9 { width: 16px; height: 16px; top: 50%; left: 40%; animation-delay: 8s; }
.particle-10 { width: 9px; height: 9px; top: 90%; left: 80%; animation-delay: 9s; }
.particle-11 { width: 20px; height: 20px; top: 40%; left: 90%; animation-delay: 10s; }
.particle-12 { width: 12px; height: 12px; top: 70%; left: 50%; animation-delay: 11s; }
.particle-13 { width: 15px; height: 15px; top: 10%; left: 50%; animation-delay: 12s; }
.particle-14 { width: 8px; height: 8px; top: 60%; left: 10%; animation-delay: 13s; }
.particle-15 { width: 13px; height: 13px; top: 30%; left: 40%; animation-delay: 14s; }

/* Login container styles */
.login-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
    z-index: 5;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
}

.card-visible {
    opacity: 1;
    visibility: visible;
}

.light-side {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
}

.dark-mode .light-side {
    background-color: rgba(15, 23, 42, 0.4);
}

.card-container {
    position: relative;
    width: 90%;
    max-width: 420px;
    min-height: 680px;
}

/* Auth card styles */
.auth-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    width: 100%;
    padding: 2rem;
    transition: all 0.5s ease-in-out;       
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    overflow: hidden;
}

.dark-mode .auth-card {
    background: #1e293b;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
}

.sign-in-card.slide-in, 
.sign-up-card.slide-in {
    opacity: 1;
    transform: translateX(0);
    z-index: 2;
}

.sign-in-card.slide-out, 
.sign-up-card.slide-out {
    opacity: 0;
    transform: translateX(-100%);
    z-index: 2;
    pointer-events: none;
}

.card-header {
    text-align: center;
    margin-bottom: 1.5rem;
}

.card-header h2 {
    font-size: 1.75rem;
    color: #333;
    margin-bottom: 0.5rem;
}

.dark-mode .card-header h2 {
    color: #e2e8f0;
}

.card-header p {
    color: #666;
    font-size: 0.95rem;
}

.dark-mode .card-header p {
    color: #94a3b8;
}

/* Role selector styles */
.role-selector {
    display: flex;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    border-radius: 12px;
    background-color: #f5f5f5;
    padding: 0.5rem;
}

.dark-mode .role-selector {
    background-color: #2d3748;
}

.role-option {
    flex: 1;
    padding: 0.75rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.role-option.selected {
    background-color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.dark-mode .role-option.selected {
    background-color: #1e293b;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.role-option:hover:not(.selected) {
    background-color: rgba(255, 255, 255, 0.5);
}

.dark-mode .role-option:hover:not(.selected) {
    background-color: rgba(255, 255, 255, 0.1);
}

.role-icon {
    margin-bottom: 0.5rem;
    color: #666;
}

.dark-mode .role-icon {
    color: #94a3b8;
}

.selected .role-icon {
    color: #1E88E5;
}

.role-option span {
    font-size: 0.85rem;
    font-weight: 500;
}

/* Form styles */
.form-group {
    margin-bottom: 1.25rem;
}

.input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
}

.dark-mode .input-wrapper {
    border-color: #334155;
    background-color: #1e293b;
}

.input-wrapper svg {
    margin-left: 12px;
}

.input-wrapper input {
    width: 100%;
    padding: 12px;
    border: none;
    outline: none;
    font-size: 0.95rem;
    background: transparent;
    color: #333;
}

.dark-mode .input-wrapper input {
    color: #e2e8f0;
}

.toggle-password {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px 12px;
}

/* Remember me and forgot password */
.remember-forgot {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.remember-me {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.9rem;
    color: #555;
}

.dark-mode .remember-me {
    color: #cbd5e1;
}

.forgot-password {
    font-size: 0.9rem;
    color: #1E88E5;
    text-decoration: none;
}

.dark-mode .forgot-password {
    color: #4CC2FF;
}

/* Submit button styles */
.submit-button {
    width: 100%;
    padding: 12px;
    background-color: #1E88E5;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-bottom: 1.5rem;
}

.submit-button:hover {
    background-color: #1976D2;
}

.arrow-icon {
    display: flex;
    align-items: center;
}

/* Divider styles */
.divider {
    display: flex;
    align-items: center;
    margin: 1.5rem 0;
    color: #999;
    position: relative;
    text-align: center;
}

.divider::before,
.divider::after {
    content: "";
    flex: 1;
    height: 1px;
    background-color: #ddd;
}

.dark-mode .divider::before,
.dark-mode .divider::after {
    background-color: #334155;
}

.divider::before {
    margin-right: 10px;
}

.divider::after {
    margin-left: 10px;
}

/* Social button styles */
.social-button {
    width: 100%;
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 0.95rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 1.5rem;
}

.social-button:hover {
    background-color: #f5f5f5;
}

.dark-mode .social-button {
    background-color: #1e293b;
    border-color: #334155;
    color: #e2e8f0;
}

.dark-mode .social-button:hover {
    background-color: #2d3748;
}

/* Toggle button for switching between sign in and sign up */
.toggle-button {
    border: none;
    background: none;
    color: #1E88E5;
    font-weight: 600;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 8px 12px;
    border-radius: 8px;
    transition: all 0.3s ease;
    display: block;
    margin: 0 auto;
}

.dark-mode .toggle-button {
    color: #4CC2FF;
}

.toggle-button:hover {
    background-color: rgba(30, 136, 229, 0.1);
}

/* Account type radio buttons */
.account-type {
    margin-bottom: 1.25rem;
}

.account-type p {
    font-size: 0.9rem;
    color: #555;
    margin-bottom: 8px;
}

.dark-mode .account-type p {
    color: #cbd5e1;
}

.radio-options {
    display: flex;
    gap: 12px;
}

.radio-option {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    color: #555;
}

.dark-mode .radio-option {
    color: #cbd5e1;
}

.radio-option input {
    accent-color: #1E88E5;
}

/* Terms checkbox */
.terms-check {
    margin-bottom: 1.5rem;
}

.terms-check label {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    font-size: 0.85rem;
    color: #555;
    cursor: pointer;
}

.dark-mode .terms-check label {
    color: #cbd5e1;
}

.terms-check input {
    margin-top: 2px;
    accent-color: #1E88E5;
}

.terms-check a {
    color: #1E88E5;
    text-decoration: none;
}

/* Responsive styles */
@@media (max-width: 480px) {
    .card-container {
        width: 95%;
        margin-top: 20px;
        margin-bottom: 20px;
    }
    
    .auth-card {
        padding: 1.5rem;
    }
    
    .card-header h2 {
        font-size: 1.5rem;
    }
    
    .welcome-title {
        font-size: 2rem;
    }
    
    .role-option span {
        font-size: 0.75rem;
    }
    
    .light-side {
        align-items: flex-start;
        padding: 1rem 0;
    }
}

@@media (max-height: 700px) {
    .card-container {
        margin-top: 20px;
        margin-bottom: 20px;
    }
    
    .light-side {
        align-items: flex-start;
        padding: 2rem 0;
    }
    
    .auth-card {
        position: relative;
    }
    
    .welcome-logo {
        margin-bottom: 1rem;
    }
    
    .welcome-logo svg {
        width: 60px;
        height: 60px;
    }
    
    .welcome-title {
        font-size: 2rem;
    }
}
</style>
@code {
    // Model classes
    public class LoginRequest
    {
        public string Email { get; set; } = string.Empty;
        public string Password { get; set; } = string.Empty;
        public bool RememberMe { get; set; }
        public bool IsAdmin { get; set; }
    }

    public class LoginResult
    {
        public bool Success { get; set; }
        public string Message { get; set; } = string.Empty;
        public string Token { get; set; } = string.Empty;
        public UserInfo? User { get; set; }
    }

    public class UserInfo
    {
        public string Id { get; set; } = string.Empty;
        public string FullName { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string Role { get; set; } = string.Empty;
        public bool IsAdmin { get; set; }
    }
    
    // UI State Variables
    private bool isWelcomeVisible = true;
    private bool isCardVisible = false;
    private bool isAdminView = true;
    private bool showPassword = false;
    private bool isSwipingRight = false;
    private string email = "";
    private string password = "";
    private bool rememberMe = false;
    private bool isSigningUp = false;
    private bool isDarkMode = false;
    
    // Sign-up fields
    private string fullName = "";
    private string signupEmail = "";
    private string signupPassword = "";
    private bool showSignupPassword = false;
    private bool acceptTerms = false;
    private bool isSignupAdmin = false;

    private void ToggleMode()
    {
        isSigningUp = !isSigningUp;
    }
    
    private void ToggleDarkMode()
    {
        isDarkMode = !isDarkMode;
        LocalStorage.SetAsync("darkMode", isDarkMode.ToString());
    }

    // Predefined Users
    private static readonly UserInfo AdminUser = new()
    {
        Id = "admin-001",
        FullName = "Admin User",
        Email = "admin@example.com",
        Role = "Administrator",
        IsAdmin = true
    };

    private static readonly UserInfo PatientUser = new()
    {
        Id = "patient-001",
        FullName = "John Doe",
        Email = "patient@example.com",
        Role = "Patient",
        IsAdmin = false
    };    // UI Methods
    private void ShowLoginCard()
    {
        Console.WriteLine("ShowLoginCard called"); // Debug output
        isWelcomeVisible = false;
        isCardVisible = true;
    }

    private void SwitchRole(bool admin)
    {
        if (admin != isAdminView)
        {
            isSwipingRight = admin;
            isAdminView = admin;
        }
    }

    private string GetCardClass()
    {
        return isSwipingRight ? "swipe-right" : "swipe-left";
    }

    private void TogglePasswordVisibility()
    {
        showPassword = !showPassword;
    }

    private void ToggleSignupPasswordVisibility()
    {
        showSignupPassword = !showSignupPassword;
    }

    // Auth Methods
    private async Task HandleLoginMethod()
    {
        // Validate inputs
        if (string.IsNullOrWhiteSpace(email) || string.IsNullOrWhiteSpace(password))
        {
            await JSRuntime.InvokeVoidAsync("alert", "Please enter both email and password.");
            return;
        }
        
        // Create login request
        LoginRequest request = new LoginRequest
        {
            Email = email,
            Password = password,
            RememberMe = rememberMe,
            IsAdmin = isAdminView
        };

        try
        {
            var result = await LoginAsync(request);
            if (result.Success)
            {
                // Store session data
                string role = isAdminView ? "admin" : "patient";
                await SessionStorage.SetAsync("userSession", $"{email}:{role}");
                
                if (rememberMe)
                {
                    await LocalStorage.SetAsync("rememberedUser", email);
                }
                
                // Redirect based on role
                NavigationManager.NavigateTo(isAdminView ? "/admin/dashboard" : "/patient/dashboard");
            }
            else
            {
                // Handle login failure
                await JSRuntime.InvokeVoidAsync("alert", result.Message);
            }
        }
        catch (Exception ex)
        {
            await JSRuntime.InvokeVoidAsync("alert", $"Login error: {ex.Message}");
        }
    }

    private async Task<LoginResult> LoginAsync(LoginRequest request)
    {
        // For demo purposes, we'll simulate authentication
        // In a real application, this would make an API call to authenticate

        await Task.Delay(1000); // Simulate network delay

        // Simplified validation for demo
        if (string.IsNullOrWhiteSpace(request.Email) || string.IsNullOrWhiteSpace(request.Password))
        {
            return new LoginResult
            {
                Success = false,
                Message = "Email and password are required."
            };
        }

        // Demo authentication logic
        if (request.IsAdmin)
        {
            if (request.Email == "admin@example.com" && request.Password == "admin123")
            {
                return await AuthenticateUserAsync(AdminUser, request.RememberMe);
            }
        }
        else
        {
            if (request.Email == "patient@example.com" && request.Password == "patient123")
            {
                return await AuthenticateUserAsync(PatientUser, request.RememberMe);
            }
        }

        return new LoginResult
        {
            Success = false,
            Message = "Invalid email or password."
        };
    }

    private async Task<LoginResult> AuthenticateUserAsync(UserInfo user, bool rememberMe)
    {
        // Generate a dummy JWT token (in a real app, this would be from your auth server)
        string token = GenerateDummyToken(user);

        // Store auth data based on remember me option
        if (rememberMe)
        {
            await LocalStorage.SetAsync("authToken", token);
            await LocalStorage.SetAsync("user", user);
        }
        else
        {
            await SessionStorage.SetAsync("authToken", token);
            await SessionStorage.SetAsync("user", user);
        }

        return new LoginResult
        {
            Success = true,
            Message = "Authentication successful",
            Token = token,
            User = user
        };
    }

    public async Task<bool> IsAuthenticatedAsync()
    {
        try
        {
            var localResult = await LocalStorage.GetAsync<string>("authToken");
            if (!string.IsNullOrEmpty(localResult.Value))
            {
                return true;
            }

            var sessionResult = await SessionStorage.GetAsync<string>("authToken");
            return !string.IsNullOrEmpty(sessionResult.Value);
        }
        catch
        {
            return false;
        }
    }    public async Task<UserInfo?> GetCurrentUserAsync()
    {
        try
        {
            var localResult = await LocalStorage.GetAsync<UserInfo>("user");
            if (localResult.Value != null)
            {
                return localResult.Value;
            }

            var sessionResult = await SessionStorage.GetAsync<UserInfo>("user");
            return sessionResult.Value;
        }
        catch
        {
            return null;
        }
    }

    public async Task LogoutAsync()
    {
        await LocalStorage.DeleteAsync("authToken");
        await LocalStorage.DeleteAsync("user");
        await SessionStorage.DeleteAsync("authToken");
        await SessionStorage.DeleteAsync("user");
    }

    // Generate a dummy token for demo purposes
    private string GenerateDummyToken(UserInfo user)
    {
        // In a real app, this would be a real JWT token
        return Convert.ToBase64String(
            System.Text.Encoding.UTF8.GetBytes(
            $"{{\"sub\":\"{user.Id}\",\"name\":\"{user.FullName}\",\"email\":\"{user.Email}\",\"role\":\"{user.Role}\",\"exp\":{DateTimeOffset.UtcNow.AddHours(1).ToUnixTimeSeconds()}}}"
        ));
    }

    private async Task HandleSignup()
    {
        // Validate signup inputs
        if (string.IsNullOrWhiteSpace(fullName) || string.IsNullOrWhiteSpace(signupEmail) || string.IsNullOrWhiteSpace(signupPassword))
        {
            await JSRuntime.InvokeVoidAsync("alert", "Please fill in all required fields.");
            return;
        }
        
        if (!acceptTerms)
        {
            await JSRuntime.InvokeVoidAsync("alert", "You must accept the terms and conditions.");
            return;
        }
        
        if (signupPassword.Length < 6)
        {
            await JSRuntime.InvokeVoidAsync("alert", "Password must be at least 6 characters long.");
            return;
        }
        
        // For demo, simulate a successful signup followed by login
        string role = isSignupAdmin ? "admin" : "patient";
        await SessionStorage.SetAsync("userSession", $"{signupEmail}:{role}");
        
        // Store basic user info
        UserInfo newUser = new UserInfo
        {
            Id = Guid.NewGuid().ToString(),
            FullName = fullName,
            Email = signupEmail,
            Role = isSignupAdmin ? "Administrator" : "Patient",
            IsAdmin = isSignupAdmin
        };
        
        // Generate token and store auth data
        string token = GenerateDummyToken(newUser);
        await SessionStorage.SetAsync("authToken", token);
        await SessionStorage.SetAsync("user", newUser);
        
        // Redirect based on role
        NavigationManager.NavigateTo(isSignupAdmin ? "/admin/dashboard" : "/patient/dashboard");
    }    protected override async Task OnInitializedAsync()
    {
        // Check if user is already logged in
        var isAuthenticated = await IsAuthenticatedAsync();
        if (isAuthenticated)
        {
            var user = await GetCurrentUserAsync();
            if (user != null)
            {
                NavigationManager.NavigateTo(user.IsAdmin ? "/admin/dashboard" : "/patient/dashboard");
            }
        }
        
        // Check for dark mode preference
        try
        {
            var darkModePreference = await LocalStorage.GetAsync<string>("darkMode");
            if (!string.IsNullOrEmpty(darkModePreference.Value))
            {
                isDarkMode = darkModePreference.Value.ToLower() == "true";
            }
        }
        catch
        {
            // Ignore errors here
        }
        
        // Try to retrieve remembered user
        try
        {
            var rememberedUser = await LocalStorage.GetAsync<string>("rememberedUser");
            if (!string.IsNullOrEmpty(rememberedUser.Value))
            {
                email = rememberedUser.Value;
                rememberMe = true;
            }
        }
        catch
        {
            // Ignore errors here
        }
    }
}